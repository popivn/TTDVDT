<div class="relative">
  <section appScrollReveal>
    <app-banner (openRegisterForm)="onOpenRegisterForm()"></app-banner>
  </section>

  <!-- Infinite Carousel: Đè lên banner -->
  <section appScrollReveal [delay]="100" class="absolute top-[380px] left-1/2 -translate-x-1/2 z-10 flex justify-center w-full overflow-x-auto scrollbar-hide">
    <app-infinite-carousel
      *ngIf="!loadingClassrooms && !classroomError && carouselItems.length > 0"
      [items]="carouselItems"
      [cardWidth]="280"
      [cardGap]="24"
      [visibleCards]="4"
      [showNavigation]="true"
      (itemClick)="onCarouselItemClick($event)">
    </app-infinite-carousel>
  </section>

  <!-- Service Cards Section -->
  <section appScrollReveal [delay]="200" class="py-12 px-4 bg-gray-50">
    <div class="container mx-auto max-w-6xl">
      <!-- Loading State -->
      <div *ngIf="loadingClassrooms" class="text-center py-8">
        <p class="text-gray-600">Đang tải phòng học...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="classroomError && !loadingClassrooms" class="text-center py-8">
        <p class="text-red-600">{{ classroomError }}</p>
      </div>

      <!-- Empty State -->
      <div *ngIf="!loadingClassrooms && !classroomError && carouselItems.length === 0" class="text-center py-8">
        <p class="text-gray-600">Chưa có phòng học nào được hiển thị.</p>
      </div>
    </div>
  </section>
  <!-- Collapse Component Example -->
   <section appScrollReveal [delay]="300" id="pending-class-list" class="mt-[160px]">
     <h1 class="text-3xl font-bold text-gray-800 mb-8 text-center">DANH SÁCH CÁC LỚP HỌC CHỜ KHAI GIẢNG</h1>
     <app-collapse #collapseComponent [items]="carouselItems"></app-collapse>
   </section>

   <div 
      *ngIf="showRegisterForm" 
      class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 "
    >
      <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl mx-auto p-0 rounded-full">
        <!-- Close button -->
        <button 
          (click)="closeRegisterForm()"
          class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-xl px-2 py-1 focus:outline-none group shadow-md"
          aria-label="Đóng đăng ký"
        >
          <fa-icon 
            [icon]="faClose" 
            class="transition-transform duration-300"
          ></fa-icon>
        </button>
        <app-enrollment-form></app-enrollment-form>
      </div>
   </div>
</div>
